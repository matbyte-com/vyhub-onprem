# VyHub chart

## Prerequisites

- A Postgres database (you can use CloudNativePG for example: https://github.com/cloudnative-pg/cloudnative-pg)
- A Grafana Loki cluster (https://grafana.com/docs/loki/latest/setup/install/helm/)
- A self-hosted VyHub instance

## Preparation

Create an environment `vyhub.env` file which holds the secret configuration:

```env
VYHUB_SECRET="" # Retrieved from VyHub setup
VYHUB_AUTH_CENTRAL_CLIENT_ID="" # Retrieved from VyHub setup
VYHUB_AUTH_CENTRAL_CLIENT_SECRET="" # Retrieved from VyHub setup
VYHUB_DATABASE_URL="postgresql://username:password@address:5432/database"
VYHUB_AUTH_STEAM_KEY="" # See VyHub documentation on how to generate a Steam Web API Key
```

Non-secret configuration is done via the `app.config` section in the Helm values file.

1. Create the vyhub namespace: `kubectl create ns vyhub`
2. Create the registry credentials: `kubectl create secret -n vyhub docker-registry vyhub-registry-credentials --docker-server=registry.matbyte.com --docker-username=<your-name> --docker-password=<your-pword>`
3. Create the secret app env: `kubectl create secret generic vyhub-app-env --from-env-file=vyhub.env`

## Usage

Below is an example `values.yaml` file.
Fill the config with the values provided by VyHub. Adapt the ingress definition according to your needs.
The example below uses cert-manager for TLS and external-dns to automatically setup the DNS entries.

```yaml
global:
  imagePullSecrets:
    - vyhub-registry-credentials

app:
  extraEnvVarsSecret: vyhub-app-env
  config:
    baseUrl: "BASE_URL"
    frontendUrl: "FRONTEND_URL"
    backendUrl: "BACKEND_URL"
    instanceId: "INSTANCE_ID"
    instanceUid: "INSTANCE_UID"
    logging:
      lokiUrl: "LOKI_URL"

ingress:
  enabled: true
  ingressClassName: INGRESS_CLASS_NAME
  annotations:
    cert-manager.io/cluster-issuer: CLUSTER_ISSUER
    external-dns.alpha.kubernetes.io/hostname: VYHUB_DOMAIN
  hostname: VYHUB_DOMAIN
  tls: true
```

`helm install vyhub . -f values.yaml`

## Generated secrets

`VYHUB_CRYPT_SECRET` and `VYHUB_SESSION_SECRET` are automatically generated and stored in the
`vyhub-app` secret as `cryptSecret` and `sessionSecret`.
As long as the secret exists, values are not overwritten during a `helm upgrade` operation.

VyHub can no longer decrypt encrypted values when the `VYHUB_CRYPT_SECRET` gets lost.
It is therefore crucial to ensure the value is never overwritten. You should backup the value to ensure it can be recovered.
You can also provice an existing secret using `app.existingSecret` to skip auto-generation.
The secret must contain the fields `cryptSecret` and `sessionSecret`.

## Limitations

The VyHub app and frontend are deployed as 2 separate containers inside the same pod.
Both containers require access to the same volume, because the VyHub app downloads the files served by the frontend.
Using a single pod has the advantage that ReadWriteOnce PVCs and non-persistent `emptyDir` volumes can be used.
Due to this architecture design decision, it is not possible to scale frontend and app individually and you need to ensure
that `app.containerPorts` and `frontend.containerPorts` do not use identical ports.
The same applies to `app.service.ports` and `frontend.service.ports`.

## Parameters

### Global parameters

| Name                                                  | Description                                                                                                                                                                                                                                                                                                                                                         | Value   |
| ----------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------- |
| `global.imageRegistry`                                | Global Docker image registry                                                                                                                                                                                                                                                                                                                                        | `""`    |
| `global.imagePullSecrets`                             | Global Docker registry secret names as an array                                                                                                                                                                                                                                                                                                                     | `[]`    |
| `global.defaultStorageClass`                          | Global default StorageClass for Persistent Volume(s)                                                                                                                                                                                                                                                                                                                | `""`    |
| `global.compatibility.openshift.adaptSecurityContext` | Adapt the securityContext sections of the deployment to make them compatible with Openshift restricted-v2 SCC: remove runAsUser, runAsGroup and fsGroup and let the platform use their allowed default IDs. Possible values: auto (apply if the detected running cluster is Openshift), force (perform the adaptation always), disabled (do not perform adaptation) | `auto`  |
| `global.compatibility.omitEmptySeLinuxOptions`        | If set to true, removes the seLinuxOptions from the securityContexts when it is set to an empty object                                                                                                                                                                                                                                                              | `false` |

### Common parameters

| Name                     | Description                                                                             | Value           |
| ------------------------ | --------------------------------------------------------------------------------------- | --------------- |
| `kubeVersion`            | Override Kubernetes version                                                             | `""`            |
| `nameOverride`           | String to partially override common.names.name                                          | `""`            |
| `fullnameOverride`       | String to fully override common.names.fullname                                          | `""`            |
| `namespaceOverride`      | String to fully override common.names.namespace                                         | `""`            |
| `commonLabels`           | Labels to add to all deployed objects                                                   | `{}`            |
| `commonAnnotations`      | Annotations to add to all deployed objects                                              | `{}`            |
| `clusterDomain`          | Kubernetes cluster domain name                                                          | `cluster.local` |
| `extraDeploy`            | Array of extra objects to deploy with the release                                       | `[]`            |
| `diagnosticMode.enabled` | Enable diagnostic mode (all probes will be disabled and the command will be overridden) | `false`         |
| `diagnosticMode.command` | Command to override all containers in the chart release                                 | `["sleep"]`     |
| `diagnosticMode.args`    | Args to override all containers in the chart release                                    | `["infinity"]`  |

### VyHub app Parameters

| Name                                                    | Description                                                                                                                                                                                                                  | Value                  |
| ------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------- |
| `app.image.registry`                                    | VyHub app image registry                                                                                                                                                                                                     | `registry.matbyte.com` |
| `app.image.repository`                                  | VyHub app image repository                                                                                                                                                                                                   | `vyhub/vyhub-onprem`   |
| `app.image.digest`                                      | VyHub app image digest in the way sha256:aa.... Please note this parameter, if set, will override the tag image tag (immutable tags are recommended)                                                                         | `""`                   |
| `app.image.pullPolicy`                                  | VyHub app image pull policy                                                                                                                                                                                                  | `IfNotPresent`         |
| `app.image.pullSecrets`                                 | VyHub app image pull secrets                                                                                                                                                                                                 | `[]`                   |
| `app.image.debug`                                       | Enable VyHub app image debug mode                                                                                                                                                                                            | `false`                |
| `app.replicaCount`                                      | Number of VyHub app replicas to deploy                                                                                                                                                                                       | `1`                    |
| `app.containerPorts.http`                               | VyHub app HTTP container port                                                                                                                                                                                                | `5050`                 |
| `app.extraContainerPorts`                               | Optionally specify extra list of additional ports for VyHub app containers                                                                                                                                                   | `[]`                   |
| `app.livenessProbe.enabled`                             | Enable livenessProbe on VyHub app containers                                                                                                                                                                                 | `true`                 |
| `app.livenessProbe.initialDelaySeconds`                 | Initial delay seconds for livenessProbe                                                                                                                                                                                      | `10`                   |
| `app.livenessProbe.periodSeconds`                       | Period seconds for livenessProbe                                                                                                                                                                                             | `15`                   |
| `app.livenessProbe.timeoutSeconds`                      | Timeout seconds for livenessProbe                                                                                                                                                                                            | `5`                    |
| `app.livenessProbe.failureThreshold`                    | Failure threshold for livenessProbe                                                                                                                                                                                          | `3`                    |
| `app.livenessProbe.successThreshold`                    | Success threshold for livenessProbe                                                                                                                                                                                          | `1`                    |
| `app.readinessProbe.enabled`                            | Enable readinessProbe on VyHub app containers                                                                                                                                                                                | `true`                 |
| `app.readinessProbe.initialDelaySeconds`                | Initial delay seconds for readinessProbe                                                                                                                                                                                     | `5`                    |
| `app.readinessProbe.periodSeconds`                      | Period seconds for readinessProbe                                                                                                                                                                                            | `10`                   |
| `app.readinessProbe.timeoutSeconds`                     | Timeout seconds for readinessProbe                                                                                                                                                                                           | `3`                    |
| `app.readinessProbe.failureThreshold`                   | Failure threshold for readinessProbe                                                                                                                                                                                         | `3`                    |
| `app.readinessProbe.successThreshold`                   | Success threshold for readinessProbe                                                                                                                                                                                         | `1`                    |
| `app.startupProbe.enabled`                              | Enable startupProbe on VyHub app containers                                                                                                                                                                                  | `true`                 |
| `app.startupProbe.initialDelaySeconds`                  | Initial delay seconds for startupProbe                                                                                                                                                                                       | `0`                    |
| `app.startupProbe.periodSeconds`                        | Period seconds for startupProbe                                                                                                                                                                                              | `5`                    |
| `app.startupProbe.timeoutSeconds`                       | Timeout seconds for startupProbe                                                                                                                                                                                             | `5`                    |
| `app.startupProbe.failureThreshold`                     | Failure threshold for startupProbe                                                                                                                                                                                           | `60`                   |
| `app.startupProbe.successThreshold`                     | Success threshold for startupProbe                                                                                                                                                                                           | `1`                    |
| `app.customLivenessProbe`                               | Custom livenessProbe that overrides the default one                                                                                                                                                                          | `{}`                   |
| `app.customReadinessProbe`                              | Custom readinessProbe that overrides the default one                                                                                                                                                                         | `{}`                   |
| `app.customStartupProbe`                                | Custom startupProbe that overrides the default one                                                                                                                                                                           | `{}`                   |
| `app.resourcesPreset`                                   | Set VyHub app container resources according to one common preset (allowed values: none, nano, small, medium, large, xlarge, 2xlarge). This is ignored if app.resources is set (app.resources is recommended for production). | `medium`                |
| `app.resources`                                         | Set VyHub app container requests and limits for different resources like CPU or memory (essential for production workloads)                                                                                                  | `{}`                   |
| `app.podSecurityContext.enabled`                        | Enable VyHub app pods' Security Context                                                                                                                                                                                      | `true`                 |
| `app.podSecurityContext.fsGroupChangePolicy`            | Set filesystem group change policy for VyHub app pods                                                                                                                                                                        | `Always`               |
| `app.podSecurityContext.sysctls`                        | Set kernel settings using the sysctl interface for VyHub app pods                                                                                                                                                            | `[]`                   |
| `app.podSecurityContext.supplementalGroups`             | Set filesystem extra groups for VyHub app pods                                                                                                                                                                               | `[]`                   |
| `app.podSecurityContext.fsGroup`                        | Set fsGroup in VyHub app pods' Security Context                                                                                                                                                                              | `1000`                 |
| `app.containerSecurityContext.enabled`                  | Enabled VyHub app container' Security Context                                                                                                                                                                                | `true`                 |
| `app.containerSecurityContext.seLinuxOptions`           | Set SELinux options in VyHub app container                                                                                                                                                                                   | `{}`                   |
| `app.containerSecurityContext.runAsUser`                | Set runAsUser in VyHub app container' Security Context                                                                                                                                                                       | `1000`                 |
| `app.containerSecurityContext.runAsGroup`               | Set runAsGroup in VyHub app container' Security Context                                                                                                                                                                      | `1000`                 |
| `app.containerSecurityContext.runAsNonRoot`             | Set runAsNonRoot in VyHub app container' Security Context                                                                                                                                                                    | `true`                 |
| `app.containerSecurityContext.readOnlyRootFilesystem`   | Set readOnlyRootFilesystem in VyHub app container' Security Context                                                                                                                                                          | `true`                 |
| `app.containerSecurityContext.privileged`               | Set privileged in VyHub app container' Security Context                                                                                                                                                                      | `false`                |
| `app.containerSecurityContext.allowPrivilegeEscalation` | Set allowPrivilegeEscalation in VyHub app container' Security Context                                                                                                                                                        | `false`                |
| `app.containerSecurityContext.capabilities.drop`        | List of capabilities to be dropped in VyHub app container                                                                                                                                                                    | `["ALL"]`              |
| `app.containerSecurityContext.seccompProfile.type`      | Set seccomp profile in VyHub app container                                                                                                                                                                                   | `RuntimeDefault`       |
| `app.command`                                           | Override default VyHub app container command (useful when using custom images)                                                                                                                                               | `[]`                   |
| `app.args`                                              | Override default VyHub app container args (useful when using custom images)                                                                                                                                                  | `[]`                   |
| `app.automountServiceAccountToken`                      | Mount Service Account token in VyHub app pods                                                                                                                                                                                | `false`                |
| `app.hostAliases`                                       | VyHub app pods host aliases                                                                                                                                                                                                  | `[]`                   |
| `app.daemonsetAnnotations`                              | Annotations for VyHub app daemonset                                                                                                                                                                                          | `{}`                   |
| `app.deploymentAnnotations`                             | Annotations for VyHub app deployment                                                                                                                                                                                         | `{}`                   |
| `app.statefulsetAnnotations`                            | Annotations for VyHub app statefulset                                                                                                                                                                                        | `{}`                   |
| `app.podLabels`                                         | Extra labels for VyHub app pods                                                                                                                                                                                              | `{}`                   |
| `app.podAnnotations`                                    | Annotations for VyHub app pods                                                                                                                                                                                               | `{}`                   |
| `app.podAffinityPreset`                                 | Pod affinity preset. Ignored if `app.affinity` is set. Allowed values: `soft` or `hard`                                                                                                                                      | `""`                   |
| `app.podAntiAffinityPreset`                             | Pod anti-affinity preset. Ignored if `app.affinity` is set. Allowed values: `soft` or `hard`                                                                                                                                 | `soft`                 |
| `app.nodeAffinityPreset.type`                           | Node affinity preset type. Ignored if `app.affinity` is set. Allowed values: `soft` or `hard`                                                                                                                                | `""`                   |
| `app.nodeAffinityPreset.key`                            | Node label key to match. Ignored if `app.affinity` is set                                                                                                                                                                    | `""`                   |
| `app.nodeAffinityPreset.values`                         | Node label values to match. Ignored if `app.affinity` is set                                                                                                                                                                 | `[]`                   |
| `app.affinity`                                          | Affinity for VyHub app pods assignment                                                                                                                                                                                       | `{}`                   |
| `app.nodeSelector`                                      | Node labels for VyHub app pods assignment                                                                                                                                                                                    | `{}`                   |
| `app.tolerations`                                       | Tolerations for VyHub app pods assignment                                                                                                                                                                                    | `[]`                   |
| `app.updateStrategy.type`                               | VyHub app deployment strategy type                                                                                                                                                                                           | `RollingUpdate`        |
| `app.priorityClassName`                                 | VyHub app pods' priorityClassName                                                                                                                                                                                            | `""`                   |
| `app.topologySpreadConstraints`                         | Topology Spread Constraints for VyHub app pod assignment spread across your cluster among failure-domains                                                                                                                    | `[]`                   |
| `app.schedulerName`                                     | Name of the k8s scheduler (other than default) for VyHub app pods                                                                                                                                                            | `""`                   |
| `app.terminationGracePeriodSeconds`                     | Seconds VyHub app pods need to terminate gracefully                                                                                                                                                                          | `""`                   |
| `app.lifecycleHooks`                                    | for VyHub app containers to automate configuration before or after startup                                                                                                                                                   | `{}`                   |
| `app.extraEnvVars`                                      | Array with extra environment variables to add to VyHub app containers                                                                                                                                                        | `[]`                   |
| `app.extraEnvVarsCM`                                    | Name of existing ConfigMap containing extra env vars for VyHub app containers                                                                                                                                                | `""`                   |
| `app.extraEnvVarsSecret`                                | Name of existing Secret containing extra env vars for VyHub app containers                                                                                                                                                   | `""`                   |
| `app.extraVolumes`                                      | Optionally specify extra list of additional volumes for the VyHub app pods                                                                                                                                                   | `[]`                   |
| `app.extraVolumeMounts`                                 | Optionally specify extra list of additional volumeMounts for the VyHub app containers                                                                                                                                        | `[]`                   |
| `app.sidecars`                                          | Add additional sidecar containers to the VyHub app pods                                                                                                                                                                      | `[]`                   |
| `app.initContainers`                                    | Add additional init containers to the VyHub app pods                                                                                                                                                                         | `[]`                   |
| `app.pdb.create`                                        | Enable/disable a Pod Disruption Budget creation                                                                                                                                                                              | `true`                 |
| `app.pdb.minAvailable`                                  | Minimum number/percentage of pods that should remain scheduled                                                                                                                                                               | `""`                   |
| `app.pdb.maxUnavailable`                                | Maximum number/percentage of pods that may be made unavailable. Defaults to `1` if both `app.pdb.minAvailable` and `app.pdb.maxUnavailable` are empty.                                                                       | `""`                   |
| `app.autoscaling.vpa.enabled`                           | Enable VPA for VyHub app pods                                                                                                                                                                                                | `false`                |
| `app.autoscaling.vpa.annotations`                       | Annotations for VPA resource                                                                                                                                                                                                 | `{}`                   |
| `app.autoscaling.vpa.controlledResources`               | VPA List of resources that the vertical pod autoscaler can control. Defaults to cpu and memory                                                                                                                               | `[]`                   |
| `app.autoscaling.vpa.maxAllowed`                        | VPA Max allowed resources for the pod                                                                                                                                                                                        | `{}`                   |
| `app.autoscaling.vpa.minAllowed`                        | VPA Min allowed resources for the pod                                                                                                                                                                                        | `{}`                   |
| `app.autoscaling.vpa.updatePolicy.updateMode`           | Autoscaling update policy                                                                                                                                                                                                    | `Auto`                 |
| `app.autoscaling.hpa.enabled`                           | Enable HPA for VyHub app pods                                                                                                                                                                                                | `false`                |
| `app.autoscaling.hpa.minReplicas`                       | Minimum number of replicas                                                                                                                                                                                                   | `""`                   |
| `app.autoscaling.hpa.maxReplicas`                       | Maximum number of replicas                                                                                                                                                                                                   | `""`                   |
| `app.autoscaling.hpa.targetCPU`                         | Target CPU utilization percentage                                                                                                                                                                                            | `""`                   |
| `app.autoscaling.hpa.targetMemory`                      | Target Memory utilization percentage                                                                                                                                                                                         | `""`                   |
| `app.serviceAccount.create`                             | Specifies whether a ServiceAccount should be created                                                                                                                                                                         | `true`                 |
| `app.serviceAccount.name`                               | The name of the ServiceAccount to use.                                                                                                                                                                                       | `""`                   |
| `app.serviceAccount.annotations`                        | Additional Service Account annotations (evaluated as a template)                                                                                                                                                             | `{}`                   |
| `app.serviceAccount.automountServiceAccountToken`       | Automount service account token for the server service account                                                                                                                                                               | `true`                 |
| `app.rbac.create`                                       | Specifies whether RBAC resources should be created                                                                                                                                                                           | `false`                |
| `app.rbac.rules`                                        | Custom RBAC rules to set                                                                                                                                                                                                     | `[]`                   |
| `app.service.type`                                      | VyHub app service type                                                                                                                                                                                                       | `ClusterIP`            |
| `app.service.ports.http`                                | VyHub app service HTTP port                                                                                                                                                                                                  | `5050`                 |
| `app.service.nodePorts.http`                            | Node port for HTTP                                                                                                                                                                                                           | `""`                   |
| `app.service.clusterIP`                                 | VyHub app service Cluster IP                                                                                                                                                                                                 | `""`                   |
| `app.service.loadBalancerIP`                            | VyHub app service Load Balancer IP                                                                                                                                                                                           | `""`                   |
| `app.service.loadBalancerSourceRanges`                  | VyHub app service Load Balancer sources                                                                                                                                                                                      | `[]`                   |
| `app.service.externalTrafficPolicy`                     | VyHub app service external traffic policy                                                                                                                                                                                    | `Cluster`              |
| `app.service.annotations`                               | Additional custom annotations for VyHub app service                                                                                                                                                                          | `{}`                   |
| `app.service.extraPorts`                                | Extra ports to expose in VyHub app service (normally used with the `sidecars` value)                                                                                                                                         | `[]`                   |
| `app.service.sessionAffinity`                           | Control where client requests go, to the same pod or round-robin                                                                                                                                                             | `None`                 |
| `app.service.sessionAffinityConfig`                     | Additional settings for the sessionAffinity                                                                                                                                                                                  | `{}`                   |
| `app.existingSecret`                                    | Existing secret for app                                                                                                                                                                                                      | `""`                   |
| `app.config.baseUrl`                                    | The URL to the API (without /v1)                                                                                                                                                                                             | `http://vyhub.local`   |
| `app.config.rootPath`                                   | When a reverse proxy with path stripping is used, set this to the stripped path. For example /api.                                                                                                                           | `""`                   |
| `app.config.pathPrefix`                                 | When a reverse proxy without path stripping is used, set this to path of the application. For example /api.                                                                                                                  | `/api`                 |
| `app.config.frontendUrl`                                | The URL where the Frontend is located                                                                                                                                                                                        | `""`                   |
| `app.config.backendUrl`                                 | The URL to the API (with /v1)                                                                                                                                                                                                | `""`                   |
| `app.config.instanceId`                                 | The VyHub instance ID                                                                                                                                                                                                        | `""`                   |
| `app.config.instanceUid`                                | The VyHub instance UID                                                                                                                                                                                                       | `""`                   |
| `app.config.addons`                                     | A list of enabled addons. Example: [forum, addon2, addon3]                                                                                                                                                                   | `[]`                   |
| `app.config.customFrontend`                             | If enabled, the web folder stays untouched and frontend files must be supplied manually                                                                                                                                      | `false`                |
| `app.config.cryptSecret`                                | A random string with at least 32 chars                                                                                                                                                                                       | `""`                   |
| `app.config.sessionSecret`                              | A random string with at least 32 chars                                                                                                                                                                                       | `""`                   |
| `app.config.server.debug`                               | Enables debug mode which causes stack traces to be printed. Should be false in production.                                                                                                                                   | `false`                |
| `app.config.server.echo`                                | Enables output of all SQL queries (to stdout)                                                                                                                                                                                | `false`                |
| `app.config.server.secure`                              | Enables HTTPS for the application. Not required with a reverse proxy (nginx).                                                                                                                                                | `false`                |
| `app.config.server.genCert`                             | Generates self-signed TLS certificates on startup for HTTPS                                                                                                                                                                  | `false`                |
| `app.config.server.port`                                | Specifies on which port the application listens                                                                                                                                                                              | `5050`                 |
| `app.config.server.workers`                             | Specifies how many processes of the application are running.                                                                                                                                                                 | `1`                    |
| `app.config.database.schema`                            | The used postgres schema                                                                                                                                                                                                     | `public`               |
| `app.config.database.maxWait`                           | The maximum amount of seconds the application wait for the database to become available                                                                                                                                      | `30`                   |
| `app.config.database.poolSize`                          | The amount of connections that application always maintains to the database                                                                                                                                                  | `5`                    |
| `app.config.database.poolOverflow`                      | The maximum amount of connections that the application can establish additionally to the pool size. These connections will be closed if not needed anymore.                                                                  | `20`                   |
| `app.config.logging.lokiUrl`                            | The URL to the Loki logging server                                                                                                                                                                                           | `""`                   |

### VyHub frontend Parameters

| Name                                                         | Description                                                                                                                                                                                                                                 | Value                         |
| ------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------- |
| `frontend.image.registry`                                    | VyHub frontend image registry                                                                                                                                                                                                               | `registry-1.docker.io`        |
| `frontend.image.repository`                                  | VyHub frontend image repository                                                                                                                                                                                                             | `nginxinc/nginx-unprivileged` |
| `frontend.image.digest`                                      | VyHub frontend image digest in the way sha256:aa.... Please note this parameter, if set, will override the tag image tag (immutable tags are recommended)                                                                                   | `""`                          |
| `frontend.image.pullPolicy`                                  | VyHub frontend image pull policy                                                                                                                                                                                                            | `IfNotPresent`                |
| `frontend.image.pullSecrets`                                 | VyHub frontend image pull secrets                                                                                                                                                                                                           | `[]`                          |
| `frontend.image.debug`                                       | Enable VyHub frontend image debug mode                                                                                                                                                                                                      | `false`                       |
| `frontend.containerPorts.http`                               | VyHub frontend HTTP container port                                                                                                                                                                                                          | `8080`                        |
| `frontend.extraContainerPorts`                               | Optionally specify extra list of additional ports for VyHub frontend containers                                                                                                                                                             | `[]`                          |
| `frontend.livenessProbe.enabled`                             | Enable livenessProbe on VyHub frontend containers                                                                                                                                                                                           | `true`                        |
| `frontend.livenessProbe.initialDelaySeconds`                 | Initial delay seconds for livenessProbe                                                                                                                                                                                                     | `30`                          |
| `frontend.livenessProbe.periodSeconds`                       | Period seconds for livenessProbe                                                                                                                                                                                                            | `15`                          |
| `frontend.livenessProbe.timeoutSeconds`                      | Timeout seconds for livenessProbe                                                                                                                                                                                                           | `5`                           |
| `frontend.livenessProbe.failureThreshold`                    | Failure threshold for livenessProbe                                                                                                                                                                                                         | `3`                           |
| `frontend.livenessProbe.successThreshold`                    | Success threshold for livenessProbe                                                                                                                                                                                                         | `1`                           |
| `frontend.readinessProbe.enabled`                            | Enable readinessProbe on VyHub frontend containers                                                                                                                                                                                          | `true`                        |
| `frontend.readinessProbe.initialDelaySeconds`                | Initial delay seconds for readinessProbe                                                                                                                                                                                                    | `5`                           |
| `frontend.readinessProbe.periodSeconds`                      | Period seconds for readinessProbe                                                                                                                                                                                                           | `10`                          |
| `frontend.readinessProbe.timeoutSeconds`                     | Timeout seconds for readinessProbe                                                                                                                                                                                                          | `3`                           |
| `frontend.readinessProbe.failureThreshold`                   | Failure threshold for readinessProbe                                                                                                                                                                                                        | `3`                           |
| `frontend.readinessProbe.successThreshold`                   | Success threshold for readinessProbe                                                                                                                                                                                                        | `1`                           |
| `frontend.startupProbe.enabled`                              | Enable startupProbe on VyHub frontend containers                                                                                                                                                                                            | `true`                        |
| `frontend.startupProbe.initialDelaySeconds`                  | Initial delay seconds for startupProbe                                                                                                                                                                                                      | `0`                           |
| `frontend.startupProbe.periodSeconds`                        | Period seconds for startupProbe                                                                                                                                                                                                             | `5`                           |
| `frontend.startupProbe.timeoutSeconds`                       | Timeout seconds for startupProbe                                                                                                                                                                                                            | `5`                           |
| `frontend.startupProbe.failureThreshold`                     | Failure threshold for startupProbe                                                                                                                                                                                                          | `30`                          |
| `frontend.startupProbe.successThreshold`                     | Success threshold for startupProbe                                                                                                                                                                                                          | `1`                           |
| `frontend.customLivenessProbe`                               | Custom livenessProbe that overrides the default one                                                                                                                                                                                         | `{}`                          |
| `frontend.customReadinessProbe`                              | Custom readinessProbe that overrides the default one                                                                                                                                                                                        | `{}`                          |
| `frontend.customStartupProbe`                                | Custom startupProbe that overrides the default one                                                                                                                                                                                          | `{}`                          |
| `frontend.resourcesPreset`                                   | Set VyHub frontend container resources according to one common preset (allowed values: none, nano, small, medium, large, xlarge, 2xlarge). This is ignored if frontend.resources is set (frontend.resources is recommended for production). | `nano`                        |
| `frontend.resources`                                         | Set VyHub frontend container requests and limits for different resources like CPU or memory (essential for production workloads)                                                                                                            | `{}`                          |
| `frontend.containerSecurityContext.enabled`                  | Enabled VyHub frontend container' Security Context                                                                                                                                                                                          | `true`                        |
| `frontend.containerSecurityContext.seLinuxOptions`           | Set SELinux options in VyHub frontend container                                                                                                                                                                                             | `{}`                          |
| `frontend.containerSecurityContext.runAsUser`                | Set runAsUser in VyHub frontend container' Security Context                                                                                                                                                                                 | `1000`                        |
| `frontend.containerSecurityContext.runAsGroup`               | Set runAsGroup in VyHub frontend container' Security Context                                                                                                                                                                                | `1000`                        |
| `frontend.containerSecurityContext.runAsNonRoot`             | Set runAsNonRoot in VyHub frontend container' Security Context                                                                                                                                                                              | `true`                        |
| `frontend.containerSecurityContext.readOnlyRootFilesystem`   | Set readOnlyRootFilesystem in VyHub frontend container' Security Context                                                                                                                                                                    | `true`                        |
| `frontend.containerSecurityContext.privileged`               | Set privileged in VyHub frontend container' Security Context                                                                                                                                                                                | `false`                       |
| `frontend.containerSecurityContext.allowPrivilegeEscalation` | Set allowPrivilegeEscalation in VyHub frontend container' Security Context                                                                                                                                                                  | `false`                       |
| `frontend.containerSecurityContext.capabilities.drop`        | List of capabilities to be dropped in VyHub frontend container                                                                                                                                                                              | `["ALL"]`                     |
| `frontend.containerSecurityContext.seccompProfile.type`      | Set seccomp profile in VyHub frontend container                                                                                                                                                                                             | `RuntimeDefault`              |
| `frontend.command`                                           | Override default VyHub frontend container command (useful when using custom images)                                                                                                                                                         | `[]`                          |
| `frontend.args`                                              | Override default VyHub frontend container args (useful when using custom images)                                                                                                                                                            | `[]`                          |
| `frontend.lifecycleHooks`                                    | for VyHub frontend containers to automate configuration before or after startup                                                                                                                                                             | `{}`                          |
| `frontend.extraEnvVars`                                      | Array with extra environment variables to add to VyHub frontend containers                                                                                                                                                                  | `[]`                          |
| `frontend.extraEnvVarsCM`                                    | Name of existing ConfigMap containing extra env vars for VyHub frontend containers                                                                                                                                                          | `""`                          |
| `frontend.extraEnvVarsSecret`                                | Name of existing Secret containing extra env vars for VyHub frontend containers                                                                                                                                                             | `""`                          |
| `frontend.extraVolumes`                                      | Optionally specify extra list of additional volumes for the VyHub frontend pods                                                                                                                                                             | `[]`                          |
| `frontend.extraVolumeMounts`                                 | Optionally specify extra list of additional volumeMounts for the VyHub frontend containers                                                                                                                                                  | `[]`                          |
| `frontend.service.ports.http`                                | VyHub frontend service HTTP port                                                                                                                                                                                                            | `8080`                        |
| `frontend.service.nodePorts.http`                            | Node port for HTTP                                                                                                                                                                                                                          | `""`                          |

### VyHub GeoIP API Parameters

| Name                                                         | Description                                                                                                                                                                                                                                 | Value                          |
| ------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------ |
| `geoipApi.image.registry`                                    | VyHub geoipApi image registry                                                                                                                                                                                                               | `registry-1.docker.io`         |
| `geoipApi.image.repository`                                  | VyHub geoipApi image repository                                                                                                                                                                                                             | `observabilitystack/geoip-api` |
| `geoipApi.image.digest`                                      | VyHub geoipApi image digest in the way sha256:aa.... Please note this parameter, if set, will override the tag image tag (immutable tags are recommended)                                                                                   | `""`                           |
| `geoipApi.image.pullPolicy`                                  | VyHub geoipApi image pull policy                                                                                                                                                                                                            | `IfNotPresent`                 |
| `geoipApi.image.pullSecrets`                                 | VyHub geoipApi image pull secrets                                                                                                                                                                                                           | `[]`                           |
| `geoipApi.image.debug`                                       | Enable VyHub geoipApi image debug mode                                                                                                                                                                                                      | `false`                        |
| `geoipApi.replicaCount`                                      | Number of VyHub geoipApi replicas to deploy                                                                                                                                                                                                 | `1`                            |
| `geoipApi.containerPorts.http`                               | VyHub geoipApi HTTP container port                                                                                                                                                                                                          | `8080`                         |
| `geoipApi.extraContainerPorts`                               | Optionally specify extra list of additional ports for VyHub geoipApi containers                                                                                                                                                             | `[]`                           |
| `geoipApi.livenessProbe.enabled`                             | Enable livenessProbe on VyHub geoipApi containers                                                                                                                                                                                           | `true`                         |
| `geoipApi.livenessProbe.initialDelaySeconds`                 | Initial delay seconds for livenessProbe                                                                                                                                                                                                     | `10`                           |
| `geoipApi.livenessProbe.periodSeconds`                       | Period seconds for livenessProbe                                                                                                                                                                                                            | `15`                           |
| `geoipApi.livenessProbe.timeoutSeconds`                      | Timeout seconds for livenessProbe                                                                                                                                                                                                           | `5`                            |
| `geoipApi.livenessProbe.failureThreshold`                    | Failure threshold for livenessProbe                                                                                                                                                                                                         | `3`                            |
| `geoipApi.livenessProbe.successThreshold`                    | Success threshold for livenessProbe                                                                                                                                                                                                         | `1`                            |
| `geoipApi.readinessProbe.enabled`                            | Enable readinessProbe on VyHub geoipApi containers                                                                                                                                                                                          | `true`                         |
| `geoipApi.readinessProbe.initialDelaySeconds`                | Initial delay seconds for readinessProbe                                                                                                                                                                                                    | `5`                            |
| `geoipApi.readinessProbe.periodSeconds`                      | Period seconds for readinessProbe                                                                                                                                                                                                           | `10`                           |
| `geoipApi.readinessProbe.timeoutSeconds`                     | Timeout seconds for readinessProbe                                                                                                                                                                                                          | `3`                            |
| `geoipApi.readinessProbe.failureThreshold`                   | Failure threshold for readinessProbe                                                                                                                                                                                                        | `3`                            |
| `geoipApi.readinessProbe.successThreshold`                   | Success threshold for readinessProbe                                                                                                                                                                                                        | `1`                            |
| `geoipApi.startupProbe.enabled`                              | Enable startupProbe on VyHub geoipApi containers                                                                                                                                                                                            | `true`                         |
| `geoipApi.startupProbe.initialDelaySeconds`                  | Initial delay seconds for startupProbe                                                                                                                                                                                                      | `0`                            |
| `geoipApi.startupProbe.periodSeconds`                        | Period seconds for startupProbe                                                                                                                                                                                                             | `5`                            |
| `geoipApi.startupProbe.timeoutSeconds`                       | Timeout seconds for startupProbe                                                                                                                                                                                                            | `5`                            |
| `geoipApi.startupProbe.failureThreshold`                     | Failure threshold for startupProbe                                                                                                                                                                                                          | `30`                           |
| `geoipApi.startupProbe.successThreshold`                     | Success threshold for startupProbe                                                                                                                                                                                                          | `1`                            |
| `geoipApi.customLivenessProbe`                               | Custom livenessProbe that overrides the default one                                                                                                                                                                                         | `{}`                           |
| `geoipApi.customReadinessProbe`                              | Custom readinessProbe that overrides the default one                                                                                                                                                                                        | `{}`                           |
| `geoipApi.customStartupProbe`                                | Custom startupProbe that overrides the default one                                                                                                                                                                                          | `{}`                           |
| `geoipApi.resourcesPreset`                                   | Set VyHub geoipApi container resources according to one common preset (allowed values: none, nano, small, medium, large, xlarge, 2xlarge). This is ignored if geoipApi.resources is set (geoipApi.resources is recommended for production). | `nano`                         |
| `geoipApi.resources`                                         | Set VyHub geoipApi container requests and limits for different resources like CPU or memory (essential for production workloads)                                                                                                            | `{}`                           |
| `geoipApi.podSecurityContext.enabled`                        | Enable VyHub geoipApi pods' Security Context                                                                                                                                                                                                | `true`                         |
| `geoipApi.podSecurityContext.fsGroupChangePolicy`            | Set filesystem group change policy for VyHub geoipApi pods                                                                                                                                                                                  | `Always`                       |
| `geoipApi.podSecurityContext.sysctls`                        | Set kernel settings using the sysctl interface for VyHub geoipApi pods                                                                                                                                                                      | `[]`                           |
| `geoipApi.podSecurityContext.supplementalGroups`             | Set filesystem extra groups for VyHub geoipApi pods                                                                                                                                                                                         | `[]`                           |
| `geoipApi.podSecurityContext.fsGroup`                        | Set fsGroup in VyHub geoipApi pods' Security Context                                                                                                                                                                                        | `1000`                         |
| `geoipApi.containerSecurityContext.enabled`                  | Enabled VyHub geoipApi container' Security Context                                                                                                                                                                                          | `true`                         |
| `geoipApi.containerSecurityContext.seLinuxOptions`           | Set SELinux options in VyHub geoipApi container                                                                                                                                                                                             | `{}`                           |
| `geoipApi.containerSecurityContext.runAsUser`                | Set runAsUser in VyHub geoipApi container' Security Context                                                                                                                                                                                 | `1000`                         |
| `geoipApi.containerSecurityContext.runAsGroup`               | Set runAsGroup in VyHub geoipApi container' Security Context                                                                                                                                                                                | `1000`                         |
| `geoipApi.containerSecurityContext.runAsNonRoot`             | Set runAsNonRoot in VyHub geoipApi container' Security Context                                                                                                                                                                              | `true`                         |
| `geoipApi.containerSecurityContext.readOnlyRootFilesystem`   | Set readOnlyRootFilesystem in VyHub geoipApi container' Security Context                                                                                                                                                                    | `true`                         |
| `geoipApi.containerSecurityContext.privileged`               | Set privileged in VyHub geoipApi container' Security Context                                                                                                                                                                                | `false`                        |
| `geoipApi.containerSecurityContext.allowPrivilegeEscalation` | Set allowPrivilegeEscalation in VyHub geoipApi container' Security Context                                                                                                                                                                  | `false`                        |
| `geoipApi.containerSecurityContext.capabilities.drop`        | List of capabilities to be dropped in VyHub geoipApi container                                                                                                                                                                              | `["ALL"]`                      |
| `geoipApi.containerSecurityContext.seccompProfile.type`      | Set seccomp profile in VyHub geoipApi container                                                                                                                                                                                             | `RuntimeDefault`               |
| `geoipApi.command`                                           | Override default VyHub geoipApi container command (useful when using custom images)                                                                                                                                                         | `[]`                           |
| `geoipApi.args`                                              | Override default VyHub geoipApi container args (useful when using custom images)                                                                                                                                                            | `[]`                           |
| `geoipApi.automountServiceAccountToken`                      | Mount Service Account token in VyHub geoipApi pods                                                                                                                                                                                          | `false`                        |
| `geoipApi.hostAliases`                                       | VyHub geoipApi pods host aliases                                                                                                                                                                                                            | `[]`                           |
| `geoipApi.daemonsetAnnotations`                              | Annotations for VyHub geoipApi daemonset                                                                                                                                                                                                    | `{}`                           |
| `geoipApi.deploymentAnnotations`                             | Annotations for VyHub geoipApi deployment                                                                                                                                                                                                   | `{}`                           |
| `geoipApi.statefulsetAnnotations`                            | Annotations for VyHub geoipApi statefulset                                                                                                                                                                                                  | `{}`                           |
| `geoipApi.podLabels`                                         | Extra labels for VyHub geoipApi pods                                                                                                                                                                                                        | `{}`                           |
| `geoipApi.podAnnotations`                                    | Annotations for VyHub geoipApi pods                                                                                                                                                                                                         | `{}`                           |
| `geoipApi.podAffinityPreset`                                 | Pod affinity preset. Ignored if `geoipApi.affinity` is set. Allowed values: `soft` or `hard`                                                                                                                                                | `""`                           |
| `geoipApi.podAntiAffinityPreset`                             | Pod anti-affinity preset. Ignored if `geoipApi.affinity` is set. Allowed values: `soft` or `hard`                                                                                                                                           | `soft`                         |
| `geoipApi.nodeAffinityPreset.type`                           | Node affinity preset type. Ignored if `geoipApi.affinity` is set. Allowed values: `soft` or `hard`                                                                                                                                          | `""`                           |
| `geoipApi.nodeAffinityPreset.key`                            | Node label key to match. Ignored if `geoipApi.affinity` is set                                                                                                                                                                              | `""`                           |
| `geoipApi.nodeAffinityPreset.values`                         | Node label values to match. Ignored if `geoipApi.affinity` is set                                                                                                                                                                           | `[]`                           |
| `geoipApi.affinity`                                          | Affinity for VyHub geoipApi pods assignment                                                                                                                                                                                                 | `{}`                           |
| `geoipApi.nodeSelector`                                      | Node labels for VyHub geoipApi pods assignment                                                                                                                                                                                              | `{}`                           |
| `geoipApi.tolerations`                                       | Tolerations for VyHub geoipApi pods assignment                                                                                                                                                                                              | `[]`                           |
| `geoipApi.updateStrategy.type`                               | VyHub geoipApi deployment strategy type                                                                                                                                                                                                     | `RollingUpdate`                |
| `geoipApi.priorityClassName`                                 | VyHub geoipApi pods' priorityClassName                                                                                                                                                                                                      | `""`                           |
| `geoipApi.topologySpreadConstraints`                         | Topology Spread Constraints for VyHub geoipApi pod assignment spread across your cluster among failure-domains                                                                                                                              | `[]`                           |
| `geoipApi.schedulerName`                                     | Name of the k8s scheduler (other than default) for VyHub geoipApi pods                                                                                                                                                                      | `""`                           |
| `geoipApi.terminationGracePeriodSeconds`                     | Seconds VyHub geoipApi pods need to terminate gracefully                                                                                                                                                                                    | `""`                           |
| `geoipApi.lifecycleHooks`                                    | for VyHub geoipApi containers to automate configuration before or after startup                                                                                                                                                             | `{}`                           |
| `geoipApi.extraEnvVars`                                      | Array with extra environment variables to add to VyHub geoipApi containers                                                                                                                                                                  | `[]`                           |
| `geoipApi.extraEnvVarsCM`                                    | Name of existing ConfigMap containing extra env vars for VyHub geoipApi containers                                                                                                                                                          | `""`                           |
| `geoipApi.extraEnvVarsSecret`                                | Name of existing Secret containing extra env vars for VyHub geoipApi containers                                                                                                                                                             | `""`                           |
| `geoipApi.extraVolumes`                                      | Optionally specify extra list of additional volumes for the VyHub geoipApi pods                                                                                                                                                             | `[]`                           |
| `geoipApi.extraVolumeMounts`                                 | Optionally specify extra list of additional volumeMounts for the VyHub geoipApi containers                                                                                                                                                  | `[]`                           |
| `geoipApi.sidecars`                                          | Add additional sidecar containers to the VyHub geoipApi pods                                                                                                                                                                                | `[]`                           |
| `geoipApi.initContainers`                                    | Add additional init containers to the VyHub geoipApi pods                                                                                                                                                                                   | `[]`                           |
| `geoipApi.pdb.create`                                        | Enable/disable a Pod Disruption Budget creation                                                                                                                                                                                             | `true`                         |
| `geoipApi.pdb.minAvailable`                                  | Minimum number/percentage of pods that should remain scheduled                                                                                                                                                                              | `""`                           |
| `geoipApi.pdb.maxUnavailable`                                | Maximum number/percentage of pods that may be made unavailable. Defaults to `1` if both `geoipApi.pdb.minAvailable` and `geoipApi.pdb.maxUnavailable` are empty.                                                                            | `""`                           |
| `geoipApi.autoscaling.vpa.enabled`                           | Enable VPA for VyHub geoipApi pods                                                                                                                                                                                                          | `false`                        |
| `geoipApi.autoscaling.vpa.annotations`                       | Annotations for VPA resource                                                                                                                                                                                                                | `{}`                           |
| `geoipApi.autoscaling.vpa.controlledResources`               | VPA List of resources that the vertical pod autoscaler can control. Defaults to cpu and memory                                                                                                                                              | `[]`                           |
| `geoipApi.autoscaling.vpa.maxAllowed`                        | VPA Max allowed resources for the pod                                                                                                                                                                                                       | `{}`                           |
| `geoipApi.autoscaling.vpa.minAllowed`                        | VPA Min allowed resources for the pod                                                                                                                                                                                                       | `{}`                           |
| `geoipApi.autoscaling.vpa.updatePolicy.updateMode`           | Autoscaling update policy                                                                                                                                                                                                                   | `Auto`                         |
| `geoipApi.autoscaling.hpa.enabled`                           | Enable HPA for VyHub geoipApi pods                                                                                                                                                                                                          | `false`                        |
| `geoipApi.autoscaling.hpa.minReplicas`                       | Minimum number of replicas                                                                                                                                                                                                                  | `""`                           |
| `geoipApi.autoscaling.hpa.maxReplicas`                       | Maximum number of replicas                                                                                                                                                                                                                  | `""`                           |
| `geoipApi.autoscaling.hpa.targetCPU`                         | Target CPU utilization percentage                                                                                                                                                                                                           | `""`                           |
| `geoipApi.autoscaling.hpa.targetMemory`                      | Target Memory utilization percentage                                                                                                                                                                                                        | `""`                           |
| `geoipApi.serviceAccount.create`                             | Specifies whether a ServiceAccount should be created                                                                                                                                                                                        | `true`                         |
| `geoipApi.serviceAccount.name`                               | The name of the ServiceAccount to use.                                                                                                                                                                                                      | `""`                           |
| `geoipApi.serviceAccount.annotations`                        | Additional Service Account annotations (evaluated as a template)                                                                                                                                                                            | `{}`                           |
| `geoipApi.serviceAccount.automountServiceAccountToken`       | Automount service account token for the server service account                                                                                                                                                                              | `true`                         |
| `geoipApi.rbac.create`                                       | Specifies whether RBAC resources should be created                                                                                                                                                                                          | `false`                        |
| `geoipApi.rbac.rules`                                        | Custom RBAC rules to set                                                                                                                                                                                                                    | `[]`                           |
| `geoipApi.service.type`                                      | geoipApi frontend service type                                                                                                                                                                                                              | `ClusterIP`                    |
| `geoipApi.service.ports.http`                                | geoipApi frontend service HTTP port                                                                                                                                                                                                         | `8080`                         |
| `geoipApi.service.nodePorts.http`                            | Node port for HTTP                                                                                                                                                                                                                          | `""`                           |
| `geoipApi.service.clusterIP`                                 | VyHub geoipApi service Cluster IP                                                                                                                                                                                                           | `""`                           |
| `geoipApi.service.loadBalancerIP`                            | VyHub geoipApi service Load Balancer IP                                                                                                                                                                                                     | `""`                           |
| `geoipApi.service.loadBalancerSourceRanges`                  | VyHub geoipApi service Load Balancer sources                                                                                                                                                                                                | `[]`                           |
| `geoipApi.service.externalTrafficPolicy`                     | VyHub geoipApi service external traffic policy                                                                                                                                                                                              | `Cluster`                      |
| `geoipApi.service.annotations`                               | Additional custom annotations for VyHub geoipApi service                                                                                                                                                                                    | `{}`                           |
| `geoipApi.service.extraPorts`                                | Extra ports to expose in VyHub geoipApi service (normally used with the `sidecars` value)                                                                                                                                                   | `[]`                           |
| `geoipApi.service.sessionAffinity`                           | Control where client requests go, to the same pod or round-robin                                                                                                                                                                            | `None`                         |
| `geoipApi.service.sessionAffinityConfig`                     | Additional settings for the sessionAffinity                                                                                                                                                                                                 | `{}`                           |

### VyHub PDF API Parameters

| Name                                                       | Description                                                                                                                                                                                                                           | Value                       |
| ---------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------- |
| `pdfApi.image.registry`                                    | VyHub pdfApi image registry                                                                                                                                                                                                           | `ghcr.io`                   |
| `pdfApi.image.repository`                                  | VyHub pdfApi image repository                                                                                                                                                                                                         | `matbyte-com/htmltopdf-api` |
| `pdfApi.image.digest`                                      | VyHub pdfApi image digest in the way sha256:aa.... Please note this parameter, if set, will override the tag image tag (immutable tags are recommended)                                                                               | `""`                        |
| `pdfApi.image.pullPolicy`                                  | VyHub pdfApi image pull policy                                                                                                                                                                                                        | `IfNotPresent`              |
| `pdfApi.image.pullSecrets`                                 | VyHub pdfApi image pull secrets                                                                                                                                                                                                       | `[]`                        |
| `pdfApi.image.debug`                                       | Enable VyHub pdfApi image debug mode                                                                                                                                                                                                  | `false`                     |
| `pdfApi.replicaCount`                                      | Number of VyHub pdfApi replicas to deploy                                                                                                                                                                                             | `1`                         |
| `pdfApi.containerPorts.http`                               | VyHub pdfApi HTTP container port                                                                                                                                                                                                      | `9090`                      |
| `pdfApi.extraContainerPorts`                               | Optionally specify extra list of additional ports for VyHub pdfApi containers                                                                                                                                                         | `[]`                        |
| `pdfApi.livenessProbe.enabled`                             | Enable livenessProbe on VyHub pdfApi containers                                                                                                                                                                                       | `false`                     |
| `pdfApi.livenessProbe.initialDelaySeconds`                 | Initial delay seconds for livenessProbe                                                                                                                                                                                               | `10`                        |
| `pdfApi.livenessProbe.periodSeconds`                       | Period seconds for livenessProbe                                                                                                                                                                                                      | `15`                        |
| `pdfApi.livenessProbe.timeoutSeconds`                      | Timeout seconds for livenessProbe                                                                                                                                                                                                     | `5`                         |
| `pdfApi.livenessProbe.failureThreshold`                    | Failure threshold for livenessProbe                                                                                                                                                                                                   | `3`                         |
| `pdfApi.livenessProbe.successThreshold`                    | Success threshold for livenessProbe                                                                                                                                                                                                   | `1`                         |
| `pdfApi.readinessProbe.enabled`                            | Enable readinessProbe on VyHub pdfApi containers                                                                                                                                                                                      | `false`                     |
| `pdfApi.readinessProbe.initialDelaySeconds`                | Initial delay seconds for readinessProbe                                                                                                                                                                                              | `5`                         |
| `pdfApi.readinessProbe.periodSeconds`                      | Period seconds for readinessProbe                                                                                                                                                                                                     | `10`                        |
| `pdfApi.readinessProbe.timeoutSeconds`                     | Timeout seconds for readinessProbe                                                                                                                                                                                                    | `3`                         |
| `pdfApi.readinessProbe.failureThreshold`                   | Failure threshold for readinessProbe                                                                                                                                                                                                  | `3`                         |
| `pdfApi.readinessProbe.successThreshold`                   | Success threshold for readinessProbe                                                                                                                                                                                                  | `1`                         |
| `pdfApi.startupProbe.enabled`                              | Enable startupProbe on VyHub pdfApi containers                                                                                                                                                                                        | `false`                     |
| `pdfApi.startupProbe.initialDelaySeconds`                  | Initial delay seconds for startupProbe                                                                                                                                                                                                | `0`                         |
| `pdfApi.startupProbe.periodSeconds`                        | Period seconds for startupProbe                                                                                                                                                                                                       | `5`                         |
| `pdfApi.startupProbe.timeoutSeconds`                       | Timeout seconds for startupProbe                                                                                                                                                                                                      | `5`                         |
| `pdfApi.startupProbe.failureThreshold`                     | Failure threshold for startupProbe                                                                                                                                                                                                    | `30`                        |
| `pdfApi.startupProbe.successThreshold`                     | Success threshold for startupProbe                                                                                                                                                                                                    | `1`                         |
| `pdfApi.customLivenessProbe`                               | Custom livenessProbe that overrides the default one                                                                                                                                                                                   | `{}`                        |
| `pdfApi.customReadinessProbe`                              | Custom readinessProbe that overrides the default one                                                                                                                                                                                  | `{}`                        |
| `pdfApi.customStartupProbe`                                | Custom startupProbe that overrides the default one                                                                                                                                                                                    | `{}`                        |
| `pdfApi.resourcesPreset`                                   | Set VyHub pdfApi container resources according to one common preset (allowed values: none, nano, small, medium, large, xlarge, 2xlarge). This is ignored if pdfApi.resources is set (pdfApi.resources is recommended for production). | `nano`                      |
| `pdfApi.resources`                                         | Set VyHub pdfApi container requests and limits for different resources like CPU or memory (essential for production workloads)                                                                                                        | `{}`                        |
| `pdfApi.podSecurityContext.enabled`                        | Enable VyHub pdfApi pods' Security Context                                                                                                                                                                                            | `true`                      |
| `pdfApi.podSecurityContext.fsGroupChangePolicy`            | Set filesystem group change policy for VyHub pdfApi pods                                                                                                                                                                              | `Always`                    |
| `pdfApi.podSecurityContext.sysctls`                        | Set kernel settings using the sysctl interface for VyHub pdfApi pods                                                                                                                                                                  | `[]`                        |
| `pdfApi.podSecurityContext.supplementalGroups`             | Set filesystem extra groups for VyHub pdfApi pods                                                                                                                                                                                     | `[]`                        |
| `pdfApi.podSecurityContext.fsGroup`                        | Set fsGroup in VyHub pdfApi pods' Security Context                                                                                                                                                                                    | `1000`                      |
| `pdfApi.containerSecurityContext.enabled`                  | Enabled VyHub pdfApi container' Security Context                                                                                                                                                                                      | `true`                      |
| `pdfApi.containerSecurityContext.seLinuxOptions`           | Set SELinux options in VyHub pdfApi container                                                                                                                                                                                         | `{}`                        |
| `pdfApi.containerSecurityContext.runAsUser`                | Set runAsUser in VyHub pdfApi container' Security Context                                                                                                                                                                             | `1000`                      |
| `pdfApi.containerSecurityContext.runAsGroup`               | Set runAsGroup in VyHub pdfApi container' Security Context                                                                                                                                                                            | `1000`                      |
| `pdfApi.containerSecurityContext.runAsNonRoot`             | Set runAsNonRoot in VyHub pdfApi container' Security Context                                                                                                                                                                          | `true`                      |
| `pdfApi.containerSecurityContext.readOnlyRootFilesystem`   | Set readOnlyRootFilesystem in VyHub pdfApi container' Security Context                                                                                                                                                                | `true`                      |
| `pdfApi.containerSecurityContext.privileged`               | Set privileged in VyHub pdfApi container' Security Context                                                                                                                                                                            | `false`                     |
| `pdfApi.containerSecurityContext.allowPrivilegeEscalation` | Set allowPrivilegeEscalation in VyHub pdfApi container' Security Context                                                                                                                                                              | `false`                     |
| `pdfApi.containerSecurityContext.capabilities.drop`        | List of capabilities to be dropped in VyHub pdfApi container                                                                                                                                                                          | `["ALL"]`                   |
| `pdfApi.containerSecurityContext.seccompProfile.type`      | Set seccomp profile in VyHub pdfApi container                                                                                                                                                                                         | `RuntimeDefault`            |
| `pdfApi.command`                                           | Override default VyHub pdfApi container command (useful when using custom images)                                                                                                                                                     | `[]`                        |
| `pdfApi.args`                                              | Override default VyHub pdfApi container args (useful when using custom images)                                                                                                                                                        | `[]`                        |
| `pdfApi.automountServiceAccountToken`                      | Mount Service Account token in VyHub pdfApi pods                                                                                                                                                                                      | `false`                     |
| `pdfApi.hostAliases`                                       | VyHub pdfApi pods host aliases                                                                                                                                                                                                        | `[]`                        |
| `pdfApi.daemonsetAnnotations`                              | Annotations for VyHub pdfApi daemonset                                                                                                                                                                                                | `{}`                        |
| `pdfApi.deploymentAnnotations`                             | Annotations for VyHub pdfApi deployment                                                                                                                                                                                               | `{}`                        |
| `pdfApi.statefulsetAnnotations`                            | Annotations for VyHub pdfApi statefulset                                                                                                                                                                                              | `{}`                        |
| `pdfApi.podLabels`                                         | Extra labels for VyHub pdfApi pods                                                                                                                                                                                                    | `{}`                        |
| `pdfApi.podAnnotations`                                    | Annotations for VyHub pdfApi pods                                                                                                                                                                                                     | `{}`                        |
| `pdfApi.podAffinityPreset`                                 | Pod affinity preset. Ignored if `pdfApi.affinity` is set. Allowed values: `soft` or `hard`                                                                                                                                            | `""`                        |
| `pdfApi.podAntiAffinityPreset`                             | Pod anti-affinity preset. Ignored if `pdfApi.affinity` is set. Allowed values: `soft` or `hard`                                                                                                                                       | `soft`                      |
| `pdfApi.nodeAffinityPreset.type`                           | Node affinity preset type. Ignored if `pdfApi.affinity` is set. Allowed values: `soft` or `hard`                                                                                                                                      | `""`                        |
| `pdfApi.nodeAffinityPreset.key`                            | Node label key to match. Ignored if `pdfApi.affinity` is set                                                                                                                                                                          | `""`                        |
| `pdfApi.nodeAffinityPreset.values`                         | Node label values to match. Ignored if `pdfApi.affinity` is set                                                                                                                                                                       | `[]`                        |
| `pdfApi.affinity`                                          | Affinity for VyHub pdfApi pods assignment                                                                                                                                                                                             | `{}`                        |
| `pdfApi.nodeSelector`                                      | Node labels for VyHub pdfApi pods assignment                                                                                                                                                                                          | `{}`                        |
| `pdfApi.tolerations`                                       | Tolerations for VyHub pdfApi pods assignment                                                                                                                                                                                          | `[]`                        |
| `pdfApi.updateStrategy.type`                               | VyHub pdfApi deployment strategy type                                                                                                                                                                                                 | `RollingUpdate`             |
| `pdfApi.priorityClassName`                                 | VyHub pdfApi pods' priorityClassName                                                                                                                                                                                                  | `""`                        |
| `pdfApi.topologySpreadConstraints`                         | Topology Spread Constraints for VyHub pdfApi pod assignment spread across your cluster among failure-domains                                                                                                                          | `[]`                        |
| `pdfApi.schedulerName`                                     | Name of the k8s scheduler (other than default) for VyHub pdfApi pods                                                                                                                                                                  | `""`                        |
| `pdfApi.terminationGracePeriodSeconds`                     | Seconds VyHub pdfApi pods need to terminate gracefully                                                                                                                                                                                | `""`                        |
| `pdfApi.lifecycleHooks`                                    | for VyHub pdfApi containers to automate configuration before or after startup                                                                                                                                                         | `{}`                        |
| `pdfApi.extraEnvVars`                                      | Array with extra environment variables to add to VyHub pdfApi containers                                                                                                                                                              | `[]`                        |
| `pdfApi.extraEnvVarsCM`                                    | Name of existing ConfigMap containing extra env vars for VyHub pdfApi containers                                                                                                                                                      | `""`                        |
| `pdfApi.extraEnvVarsSecret`                                | Name of existing Secret containing extra env vars for VyHub pdfApi containers                                                                                                                                                         | `""`                        |
| `pdfApi.extraVolumes`                                      | Optionally specify extra list of additional volumes for the VyHub pdfApi pods                                                                                                                                                         | `[]`                        |
| `pdfApi.extraVolumeMounts`                                 | Optionally specify extra list of additional volumeMounts for the VyHub pdfApi containers                                                                                                                                              | `[]`                        |
| `pdfApi.sidecars`                                          | Add additional sidecar containers to the VyHub pdfApi pods                                                                                                                                                                            | `[]`                        |
| `pdfApi.initContainers`                                    | Add additional init containers to the VyHub pdfApi pods                                                                                                                                                                               | `[]`                        |
| `pdfApi.pdb.create`                                        | Enable/disable a Pod Disruption Budget creation                                                                                                                                                                                       | `true`                      |
| `pdfApi.pdb.minAvailable`                                  | Minimum number/percentage of pods that should remain scheduled                                                                                                                                                                        | `""`                        |
| `pdfApi.pdb.maxUnavailable`                                | Maximum number/percentage of pods that may be made unavailable. Defaults to `1` if both `pdfApi.pdb.minAvailable` and `pdfApi.pdb.maxUnavailable` are empty.                                                                          | `""`                        |
| `pdfApi.autoscaling.vpa.enabled`                           | Enable VPA for VyHub pdfApi pods                                                                                                                                                                                                      | `false`                     |
| `pdfApi.autoscaling.vpa.annotations`                       | Annotations for VPA resource                                                                                                                                                                                                          | `{}`                        |
| `pdfApi.autoscaling.vpa.controlledResources`               | VPA List of resources that the vertical pod autoscaler can control. Defaults to cpu and memory                                                                                                                                        | `[]`                        |
| `pdfApi.autoscaling.vpa.maxAllowed`                        | VPA Max allowed resources for the pod                                                                                                                                                                                                 | `{}`                        |
| `pdfApi.autoscaling.vpa.minAllowed`                        | VPA Min allowed resources for the pod                                                                                                                                                                                                 | `{}`                        |
| `pdfApi.autoscaling.vpa.updatePolicy.updateMode`           | Autoscaling update policy                                                                                                                                                                                                             | `Auto`                      |
| `pdfApi.autoscaling.hpa.enabled`                           | Enable HPA for VyHub pdfApi pods                                                                                                                                                                                                      | `false`                     |
| `pdfApi.autoscaling.hpa.minReplicas`                       | Minimum number of replicas                                                                                                                                                                                                            | `""`                        |
| `pdfApi.autoscaling.hpa.maxReplicas`                       | Maximum number of replicas                                                                                                                                                                                                            | `""`                        |
| `pdfApi.autoscaling.hpa.targetCPU`                         | Target CPU utilization percentage                                                                                                                                                                                                     | `""`                        |
| `pdfApi.autoscaling.hpa.targetMemory`                      | Target Memory utilization percentage                                                                                                                                                                                                  | `""`                        |
| `pdfApi.serviceAccount.create`                             | Specifies whether a ServiceAccount should be created                                                                                                                                                                                  | `true`                      |
| `pdfApi.serviceAccount.name`                               | The name of the ServiceAccount to use.                                                                                                                                                                                                | `""`                        |
| `pdfApi.serviceAccount.annotations`                        | Additional Service Account annotations (evaluated as a template)                                                                                                                                                                      | `{}`                        |
| `pdfApi.serviceAccount.automountServiceAccountToken`       | Automount service account token for the server service account                                                                                                                                                                        | `true`                      |
| `pdfApi.rbac.create`                                       | Specifies whether RBAC resources should be created                                                                                                                                                                                    | `false`                     |
| `pdfApi.rbac.rules`                                        | Custom RBAC rules to set                                                                                                                                                                                                              | `[]`                        |
| `pdfApi.service.type`                                      | VyHub pdfApi service type                                                                                                                                                                                                             | `ClusterIP`                 |
| `pdfApi.service.ports.http`                                | VyHub pdfApi service HTTP port                                                                                                                                                                                                        | `9090`                      |
| `pdfApi.service.nodePorts.http`                            | Node port for HTTP                                                                                                                                                                                                                    | `""`                        |
| `pdfApi.service.clusterIP`                                 | VyHub pdfApi service Cluster IP                                                                                                                                                                                                       | `""`                        |
| `pdfApi.service.loadBalancerIP`                            | VyHub pdfApi service Load Balancer IP                                                                                                                                                                                                 | `""`                        |
| `pdfApi.service.loadBalancerSourceRanges`                  | VyHub pdfApi service Load Balancer sources                                                                                                                                                                                            | `[]`                        |
| `pdfApi.service.externalTrafficPolicy`                     | VyHub pdfApi service external traffic policy                                                                                                                                                                                          | `Cluster`                   |
| `pdfApi.service.annotations`                               | Additional custom annotations for VyHub pdfApi service                                                                                                                                                                                | `{}`                        |
| `pdfApi.service.extraPorts`                                | Extra ports to expose in VyHub pdfApi service (normally used with the `sidecars` value)                                                                                                                                               | `[]`                        |
| `pdfApi.service.sessionAffinity`                           | Control where client requests go, to the same pod or round-robin                                                                                                                                                                      | `None`                      |
| `pdfApi.service.sessionAffinityConfig`                     | Additional settings for the sessionAffinity                                                                                                                                                                                           | `{}`                        |

### Traffic Exposure Parameters

| Name                       | Description                                                                                                                      | Value         |
| -------------------------- | -------------------------------------------------------------------------------------------------------------------------------- | ------------- |
| `ingress.enabled`          | Enable ingress record generation for VyHub                                                                                       | `false`       |
| `ingress.pathType`         | Ingress path type                                                                                                                | `Prefix`      |
| `ingress.apiVersion`       | Force Ingress API version (automatically detected if not set)                                                                    | `""`          |
| `ingress.hostname`         | Default host for the ingress record                                                                                              | `vyhub.local` |
| `ingress.ingressClassName` | IngressClass that will be be used to implement the Ingress (Kubernetes 1.18+)                                                    | `""`          |
| `ingress.path`             | Ingress path for VyHub frontend                                                                                                  | `/`           |
| `ingress.appPath`          | Ingress path for VyHub app                                                                                                       | `/api/`       |
| `ingress.annotations`      | Additional annotations for the Ingress resource. To enable certificate autogeneration, place here your cert-manager annotations. | `{}`          |
| `ingress.tls`              | Enable TLS configuration for the host defined at `ingress.hostname` parameter                                                    | `false`       |
| `ingress.selfSigned`       | Create a TLS secret for this ingress record using self-signed certificates generated by Helm                                     | `false`       |
| `ingress.extraHosts`       | An array with additional hostname(s) to be covered with the ingress record                                                       | `[]`          |
| `ingress.extraPaths`       | An array with additional arbitrary paths that may need to be added to the ingress under the main host                            | `[]`          |
| `ingress.extraTls`         | TLS configuration for additional hostname(s) to be covered with this ingress record                                              | `[]`          |
| `ingress.secrets`          | Custom TLS certificates as secrets                                                                                               | `[]`          |
| `ingress.extraRules`       | Additional rules to be covered with this ingress record                                                                          | `[]`          |

### Persistence Parameters

| Name                            | Description                                       | Value               |
| ------------------------------- | ------------------------------------------------- | ------------------- |
| `persistence.enabled`           | Enable persistence using Persistent Volume Claims | `false`             |
| `persistence.web.existingClaim` | Name of an existing PVC to use                    | `""`                |
| `persistence.web.storageClass`  | PVC Storage Class for vyhub-web volume            | `""`                |
| `persistence.web.subPath`       | The sub path used in the volume                   | `""`                |
| `persistence.web.accessModes`   | The access mode of the volume                     | `["ReadWriteOnce"]` |
| `persistence.web.size`          | The size of the volume                            | `5Gi`               |
| `persistence.web.annotations`   | Annotations for the PVC                           | `{}`                |
| `persistence.web.selector`      | Selector to match an existing Persistent Volume   | `{}`                |

### Init Container Parameters

| Name                                                        | Description                                                                                                                                                                                                                                         | Value                      |
| ----------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------- |
| `volumePermissions.enabled`                                 | Enable init container that changes the owner/group of the PV mount point to `runAsUser:fsGroup`                                                                                                                                                     | `false`                    |
| `volumePermissions.image.registry`                          | OS Shell + Utility image registry                                                                                                                                                                                                                   | `REGISTRY_NAME`            |
| `volumePermissions.image.repository`                        | OS Shell + Utility image repository                                                                                                                                                                                                                 | `REPOSITORY_NAME/os-shell` |
| `volumePermissions.image.pullPolicy`                        | OS Shell + Utility image pull policy                                                                                                                                                                                                                | `IfNotPresent`             |
| `volumePermissions.image.pullSecrets`                       | OS Shell + Utility image pull secrets                                                                                                                                                                                                               | `[]`                       |
| `volumePermissions.resourcesPreset`                         | Set init container resources according to one common preset (allowed values: none, nano, small, medium, large, xlarge, 2xlarge). This is ignored if volumePermissions.resources is set (volumePermissions.resources is recommended for production). | `nano`                     |
| `volumePermissions.resources`                               | Set init container requests and limits for different resources like CPU or memory (essential for production workloads)                                                                                                                              | `{}`                       |
| `volumePermissions.containerSecurityContext.enabled`        | Enabled init container' Security Context                                                                                                                                                                                                            | `true`                     |
| `volumePermissions.containerSecurityContext.seLinuxOptions` | Set SELinux options in init container                                                                                                                                                                                                               | `{}`                       |
| `volumePermissions.containerSecurityContext.runAsUser`      | Set init container's Security Context runAsUser                                                                                                                                                                                                     | `0`                        |

### Other Parameters


